/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={710:(e,t,r)=>{"use strict";var n=r(203);Object.defineProperty(t,"__esModule",{value:!0}),t.doHlsParsefunction=function(){var e,t=(e=(0,i.default)(a.default.mark((function e(t,r){var n,i,s,u,p,h;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b&&(n=console).log.apply(n,(0,c.default)(g(t.id,"browserAction.onClicked",""))),i=t.id,s=t.index,u=d[i]){e.next=6;break}return e.abrupt("return");case 6:if((p=u.url).startsWith("http")){e.next=9;break}return e.abrupt("return",r({msg:(0,f.t)("TbgTryLater")}));case 9:if(!u.isLoader){e.next=11;break}return e.abrupt("return",r({msg:(0,f.t)("TbgIsDownloading")}));case 11:if(!f.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP.exec(p)){e.next=13;break}return e.abrupt("return",r({msg:"Do not support this webpage"}));case 13:if(!u.childTabId){e.next=17;break}y.tabs.update(u.childTabId,{active:!0},k("tabs.update.1")),e.next=22;break;case 17:return h=f.PROENV&&p.startsWith("https://")?"https":"http",e.next=20,(0,f.getLoaderUrl)();case 20:o=e.sent,y.tabs.create({url:h+o,index:s+1,active:!0},(function(e){if(!k("tabs.create")()){var t,r=e.url||e.pendingUrl;S&&(r=h+o),b&&(t=console).log.apply(t,(0,c.default)(g(e.id,"browserAction.onClicked->tabs.create","new loader tab "+r))),U.create(e.id,{url:r,parentTabId:i}),u.childTabId=e.id,C.counter++,P(C),(0,l.plusDlCount)(),setTimeout((function(){y.tabs.update(e.id,{autoDiscardable:!1},k("tabs.update.2"))}),1e3)}}));case 22:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)});console.log("hlsParser");var r,n=function(e){return e.match(/[^#]+/)[0]},p=function(e){return((e.match(/[^\/]+$/)||[])[0]||"").match(/^[^\?&#]*/)[0]},h=function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;if(s.name.toLowerCase()===t)return s.value.toLowerCase()}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return""},v=function(e){var t=e%64;return"color:#"+((t>>4&3)<<22|(t>>2&3)<<14|(3&t)<<6|1048576).toString(16)},g=function(e,t,r){return e?["tabId %c"+e+"%c ["+t+"]%c "+r,v(e),"color:#f60b91",""]:["%c%c["+t+"]%c "+r,v(e),"color:#f60b91",""]},m=function(e){return["%c"+e,"color:#ff0000"]},b=localStorage.log,y=(localStorage.log,navigator.userAgent.includes("Chrome")?chrome:browser),x=y.runtime.getManifest(),E=(y.i18n,(0,f.getLanguage)(),navigator.userAgent.includes("Edg")),S=!E&&navigator.userAgent.includes("Firefox"),_=(!E&&navigator.userAgent.includes("Chrome")&&Number((navigator.userAgent.match(/Chrome\/(\d+)/)||[])[1]||0)||0)<72?["blocking","requestHeaders"]:["blocking","requestHeaders","extraHeaders"],w="intercept_ondata",T="disconnect",O="fetch",I=1,M=2,D=1,L=4,A={M3U8:1,TS:2,DASH:3,MEDIASTREAM:4,M3U8_CANDIDATE:99},N="speed",P=function(e){localStorage.option=JSON.stringify(e)},k=function(e){return function(){var t;return!!y.runtime.lastError&&(b&&(t=console).log.apply(t,(0,c.default)(m("["+e+"] WebExtensions.runtime.lastError => "+y.runtime.lastError.message))),!0)}};b&&(r=console).log.apply(r,(0,c.default)(g(null,x.name,x.version+" start")));var R,C=function(){var e=localStorage.option,t={counter:0,priority:N,domain:{},rcounterr:0};try{e&&Object.assign(t,JSON.parse(e)),t.counter=Math.max(0,Math.floor(Number(t.counter)||0)),t.rcounterr=Math.max(0,Math.floor(Number(t.rcounterr)||0)),localStorage.option=JSON.stringify(t)}catch(e){var r;(r=console).log.apply(r,(0,c.default)(m(e.stack)))}return t}();b&&(R=console).log.apply(R,(0,c.default)(g(null,"option",JSON.stringify(C))));var U=function(){function e(t,r){(0,s.default)(this,e);var n=r.url,o=r.parentTabId,a=r.childTabId;for(var i in this.id=t,this.url=n||"",this.parentTabId=o||null,this.childTabId=a||null,this.ignoreDisconnectOnce=!1,this.frames={},this.requestHeaders={},this.que={},A)this.que[A[i]]=[];this.actionButtonStatus="",this.stat=I,this.mode=D,this.storedBlob={}}var t,r,n;return(0,u.default)(e,[{key:"push",value:function(e,t){var r=this.que[e];if(r&&!(r.length>=100)){t.header=function(e){var t={};if(e){var r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;t[s.name]=s.value}}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}return t}(t.header);for(var n=0,o=r.length;n<o;n++){var a=r[n];if(a.url===t.url&&a.referer===t.referer&&JSON.stringify(a.header)===JSON.stringify(t.header))return}t.sent=!1,r.push(t),this.stat===M&&this.mode===D&&this.consume()}}},{key:"consume",value:(n=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.que[A.M3U8].filter((function(e){return!e.sent})),t&&0===r.length&&(r=this.que[A.M3U8_CANDIDATE].filter((function(e){return!e.sent}))),this.sendMessage("udpate_index",{type:A.M3U8,que:r}),r.forEach((function(e){e.sent=!0}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"start",value:(r=(0,i.default)(a.default.mark((function e(t){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b&&(r=console).log.apply(r,(0,c.default)(g(this.id,"Tab.start",""))),this.stat=M,this.mode=t,this.mode===D&&this.consume(!0),H(this.id);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"stop",value:function(){var e;b&&(e=console).log.apply(e,(0,c.default)(g(this.id,"Tab.stop",""))),this.stat=I}},{key:"reset",value:function(){var e;for(var t in b&&(e=console).log.apply(e,(0,c.default)(g(this.id,"Tab.reset",""))),this.stat=I,this.mode=D,this.ignoreDisconnectOnce=!1,this.que){var r=!0,n=!1,o=void 0;try{for(var a,i=this.que[t][Symbol.iterator]();!(r=(a=i.next()).done);r=!0)a.value.sent=!1}catch(e){n=!0,o=e}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}}H(this.id)}},{key:"destroy",value:function(){var e;b&&(e=console).log.apply(e,(0,c.default)(g(this.id,"Tab.destroy",""))),this.stop(),delete d[this.id];var t=Object.assign({},this.storedBlob);setTimeout((function(){for(var e in t)URL.revokeObjectURL(e)}),3e3)}},{key:"revokeObjectURL",value:function(e){if(e){var t=!0,r=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;URL.revokeObjectURL(i),delete this.storedBlob[i]}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}}},{key:"sendMessage",value:function(e,t){var r,n=this;return b&&(r=console).log.apply(r,(0,c.default)(g(this.id,"sendMessage",e))),new Promise((function(r,o){n.childTabId&&n.stat===M?y.tabs.sendMessage(n.childTabId,{cmd:e,params:t},(function(e){var t;y.runtime.lastError&&(t=console).log.apply(t,(0,c.default)(m("[Tab.sendMessage] WebExtensions.runtime.lastError => "+y.runtime.lastError.message))),r(e)})):r()}))}},{key:"virtualize",value:function(){var e,t=""+this.id;return!(!this.childTabId||!d[this.childTabId]||t.startsWith("virtual_"))&&(delete d[t],this.id="virtual_for_"+this.childTabId,d[this.id]=this,d[this.childTabId].parentTabId=this.id,this.mode===L&&y.tabs.sendMessage(this.childTabId,{cmd:w,params:{url:T}},k("tabs.sendMessage.2x")),b&&(e=console).log.apply(e,(0,c.default)(g(t,"tab.virtualize","to "+this.id))),!0)}},{key:"isLoader",get:function(){return this.parentTabId}}],[{key:"create",value:function(t,r){var n,o,a;t?(d[t]?b&&(n=console).log.apply(n,(0,c.default)(g(t,"Tab.create",d[t].url+" [ EXISTS ] , ignore"))):(d[t]=new e(t,r),b&&(o=console).log.apply(o,(0,c.default)(g(t,"Tab.create",d[t].url)))),H(t)):b&&(a=console).log.apply(a,(0,c.default)(g(t,"Tab.create","No tabID is specified, abort.")))}},{key:"remove",value:(t=(0,i.default)(a.default.mark((function e(t){var r,n,o,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d[t],n=r.isLoader,r&&(n?(r.stop(),delete d[t],(o=d[r.parentTabId])&&(o.stop(),o.reset(),o.childTabId=null,(o.id+"").startsWith("virtual_")&&o.destroy())):r.mode===D?r.destroy():r.mode===L&&(r.destroy(),y.tabs.sendMessage(r.childTabId,{cmd:w,params:{url:T}},k("tabs.sendMessage.2xx"))),b&&(i=console).log.apply(i,(0,c.default)(g(t,"Tab.remove",r.url))));case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"find",value:function(t,r){if(r===e.TAB_ID)return d[t];var n=["id","parentTabId","childTabId"][r];for(var o in d){var a=d[o];if(a[n]===t)return a}return null}}]),e}();Object.assign(U,{TAB_ID:0,PARENT_ID:1,CHILD_ID:2}),y.webRequest.onBeforeRequest.addListener((function(e){var t=e.tabId,r=n(e.url),o=d[t];if(o&&(o.actionButtonStatus="",o.url===r&&!o.isLoader))if(o.ignoreDisconnectOnce){var a;b&&(a=console).log.apply(a,(0,c.default)(g(t,"onBeforeRequest","ignore reloading for intercept-loader"))),o.ignoreDisconnectOnce=!1}else if(o.childTabId){var i;b&&(i=console).log.apply(i,(0,c.default)(g(t,"onBeforeRequest","reload, "+e.url))),o.virtualize()||U.remove(t),U.create(t,{url:r})}else{var s;b&&(s=console).log.apply(s,(0,c.default)(g(t,"onBeforeRequest","ignore reloading ( has no child ), "+e.url)))}}),{urls:["<all_urls>"],types:["main_frame"]},[]),y.webRequest.onBeforeSendHeaders.addListener((function(e){var t=e.requestHeaders,r=e.url,n=e.tabId,o=e.type,a=e.requestId,i=d[n];if(i&&!f.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP.exec(r))return i.isLoader?C.counter<30&&r.includes("pagead2")||"xmlhttprequest"===o&&r.includes("cococut_promotion")?{cancel:!0}:void 0:(i&&"xmlhttprequest"===o&&(i.requestHeaders[a]=t),{requestHeaders:t})}),{urls:["<all_urls>"]},_),y.webRequest.onBeforeSendHeaders.addListener((function(e){var t=e.requestHeaders,r=(e.url,e.tabId,e.type);if(e.requestId,"xmlhttprequest"===r)for(var n=0,o=t.length;n<o;n++){var a=t[n];a.name.startsWith("LM_")&&(t[n]={name:a.name.substr(3),value:a.value})}return{requestHeaders:t}}),{urls:["<all_urls>"]},_),y.webRequest.onHeadersReceived.addListener((function(e){var t=e.url,r=e.tabId,n=e.type,o=e.frameId,a=e.statusCode,i=e.responseHeaders,s=e.requestId,u=e.method,l=a>=200&&a<300,v=d[r];if(v&&"OPTIONS"!==u){if(l&&!v.isLoader&&!f.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP.exec(t)){v.frames[o]||(v.frames[o]=e.url);var m=p(t),y=h(i,"content-type");if(y.match(/(mpegurl|m3u)/)||m.match(/(\.m3u8)/)){var x;b&&(x=console).log.apply(x,(0,c.default)(g(r,"Found : "+y+", "+e.type,t)));var E=0!==o?v.frames[o]:v.url,S=v.requestHeaders[s];v.push(A.M3U8,{url:t,contentType:y,referer:E,header:S}),H(r)}else if("xmlhttprequest"===n&&t.match(/[\.\/](m3u|hls)/)&&!m.match(/\.(js|json|html)$/)&&0===v.que[A.M3U8].length&&Number(h(i,"content-length"))<1048576){var _=v.requestHeaders[s],w=0!==o?v.frames[o]:v.url;v.push(A.M3U8_CANDIDATE,{url:t,contentType:"application/x-mpegURL",referer:w,header:_}),H(r)}}delete v.requestHeaders[s]}}),{urls:["<all_urls>"]},["responseHeaders","blocking"]),y.tabs.onUpdated.addListener((function(e,t,r){if(k("tabs.onUpdated"),"loading"===t.status){var a=n(r.url),i=d[e];if(i){if(i.isLoader)if(a.includes(o)||S){var s;b&&(s=console).log.apply(s,(0,c.default)(g(e,"tabs.onUpdated","LoaderTab [ reloading ] , ignore")));var u=d[i.parentTabId];u&&(u.stop(),u.reset())}else{var l;b&&(l=console).log.apply(l,(0,c.default)(g(e,"tabs.onUpdated",a+" [ moved ]"))),U.remove(e),U.create(e,{url:a})}else if(i.url===a);else{var f;b&&(f=console).log.apply(f,(0,c.default)(g(e,"tabs.onUpdated",a+" [ moved ]"))),i.virtualize()||U.remove(e),U.create(e,{url:a})}H(e)}else{var p;b&&(p=console).log.apply(p,(0,c.default)(g(e,"onBeforeRequest",a+" [ new ]"))),U.create(e,{url:a})}}})),y.tabs.onRemoved.addListener((function(e){var t,r=d[e];b&&(t=console).log.apply(t,(0,c.default)(g(e,"tabs.onRemoved",(null==r?void 0:r.url)||"none"))),r&&(r.virtualize()||U.remove(e))})),y.runtime.onMessage.addListener((function(e,r,n){var o,a,i=e.cmd,s=e.params,u=e.msgSender,l=null===(o=r.tab)||void 0===o?void 0:o.id;if("cmd_open_parser"==i&&y.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){t(e[0],n)})),i===w){if(d[l]){var f=s.targetId,p=d[f];p&&p.parentTabId===l&&y.tabs.sendMessage(f,{cmd:i,params:s},k("tabs.sendMessage.2"))}return n()}b&&i!==O&&(a=console).log.apply(a,(0,c.default)(g(l,"onMessage",JSON.stringify(e).substr(0,100))));var h=U.find(l,U.CHILD_ID);if(!h&&u&&"cocoParser"==u)return console.log("no tab"),n({error:"no related tabs found"});if("init"===i){var v=l,m=h.id,E=s.counter||0,S=(null==x?void 0:x.version)||"0.0.0";C.counter<E&&(C.counter=E,P(C));var _=C.counter;return h.title?n({id:v,parentTabId:m,url:h.url,title:h.title,counter:_,version:S}):(""+h.id).startsWith("virtual_")?n({id:v,parentTabId:m,url:h.url,title:"video title - none",counter:_}):(y.tabs.get(h.id,(function(e){return h.title=e.title,n({id:v,parentTabId:m,url:h.url,title:h.title,counter:_,version:S})})),!0)}if("start_normal"===i)return h.start(D),n();if(i===O){var T=s.url,I=s.method,M=s.headers,A=(s.timeout,s.revokeList);return h.revokeObjectURL(A),fetch(T,{method:I||"GET",mode:"cors",credentials:"include",headers:M}).then((function(e){if(e.ok)return e.blob();n({ok:!1,message:"fetch error, may be 403 or 429"})})).then((function(e){var t=URL.createObjectURL(e);h.storedBlob[t]=1,n({ok:!0,blobUrl:t})})).catch((function(e){n({ok:!1,message:e.messsage})})),!0}if("intercept_request"===i){if(h&&!(""+h.id).startsWith("virtual_")){h.ignoreDisconnectOnce=!0,setTimeout((function(){delete h.ignoreDisconnectOnce}),3e3),y.tabs.update(h.id,{active:!0},k("tabs.update.at.CMD_INTERCEPT_REQUEST"));var N="localStorage._intercept_mediastream_="+l+";location.reload();";return y.tabs.executeScript(h.id,{code:N,allFrames:!0},k("tabs.executeScript.on.CMD_INTERCEPT_REQUEST")),h.start(L),C.rcounterr++,P(C),n(!0)}return n(!1)}"intercept_ok"===i&&(delete h.ignoreDisconnectOnce,y.tabs.executeScript(h.id,{code:"delete localStorage._intercept_mediastream_;",allFrames:!0},k("tabs.executeScript.on.CMD_INTERCEPT_OK"))),u&&"cocoParser"==u&&n()})),y.commands.onCommand.addListener((function(e){var r=function(){};"force-download"===e&&((0,f.isActivePro)()?y.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){t(e[0],r)})):y.tabs.create({url:f.HOMEPAGE+"/needpro.html",active:!0}))}));var H=function(e){if(!(e+"").startsWith("virtual")){var t,r=d[e],n=!r||r.isLoader?"loader":r.mode===L?"capturing":r.que[A.M3U8].length?"enable":r.que[A.M3U8_CANDIDATE].length?"enable_weak":"off";if(n!==r.actionButtonStatus)b&&(t=console).log.apply(t,(0,c.default)(g(e,"updatePageActionButton",n))),r.actionButtonStatus=n}}},t.tabs=void 0;var o,a=n(r(824)),i=n(r(29)),s=n(r(983)),u=n(r(81)),c=n(r(833)),l=(n(r(501)),r(692)),f=r(544),d={};t.tabs=d},544:(e,t,r)=>{"use strict";var n=r(203);Object.defineProperty(t,"__esModule",{value:!0}),t.doInit=function(){if(void 0===localStorage[p]||""==localStorage[p]){var e=new Array({ext:"flv",size:10},{ext:"hlv",size:10},{ext:"f4v",size:10},{ext:"mp4",size:10},{ext:"mp3",size:10},{ext:"wma",size:10},{ext:"wav",size:10},{ext:"m4a",size:10},{ext:"webm",size:10},{ext:"ogg",size:10},{ext:"ogv",size:10},{ext:"acc",size:10},{ext:"mov",size:10},{ext:"mkv",size:10},{ext:"m3u8",size:0},{ext:"ts",size:1e11});localStorage[p]=JSON.stringify(e)}if(void 0===localStorage.Type){var t=new Array({Type:"video/*",size:2048},{Type:"audio/*",size:10});localStorage.Type=JSON.stringify(t)}if(void 0===localStorage.BlockedDomains){var r=new Array;localStorage.BlockedDomains=JSON.stringify(r)}void 0===localStorage.repeat&&(localStorage.repeat=!1),void 0===localStorage.repeatReg&&(localStorage.repeatReg="\\?[\\S]+"),void 0===localStorage.Debug&&(localStorage.Debug=!1),void 0===localStorage.TitleName&&(localStorage.TitleName=!1),void 0===localStorage.popListCount&&(localStorage.popListCount=30),void 0===localStorage.showCountOnIcon&&(localStorage.showCountOnIcon=!0)},t.tr=function(e){$("#"+e).html(h(e))},t.getLanguage=g,t.getExtManifest=function(){return d.runtime.getManifest()},t.isActivePro=y,t.getDLMUrl=function(){var e,t=g(),r="://cococut.net/";return e="other"!=t?"dlm.html":"odlm.html",y()&&(r="://pro.cococut.net/",e="dlm.vhtml","other"==t&&(e="odlm.vhtml")),r+"dlm/"+(v.includes(t)?t+"/":"")+e},t.getLoaderUrl=t.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP=t.supportedLanguages=t.t=t.PRE_DEF_EXTS=t.YTDLUIPAGE=t.YTDLPAGE=t.HOMEPAGE=t.ISEDGE=t.PROENV=void 0;var o,a,i,s=n(r(824)),u=n(r(29)),c=r(692),l=r(962),f=(o=(0,u.default)(s.default.mark((function e(){var t,r,n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=E()).dailycount||(t.dailycount=20),e.next=4,(0,l.getExpItem)("dailyDlCount");case 4:return(r=e.sent)&&r>t.dailycount&&(n="exceeded.html"),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)}),d=navigator.userAgent.includes("Chrome")?chrome:browser;t.PROENV=!0,t.ISEDGE=!1,t.HOMEPAGE=a,t.YTDLPAGE=i,t.YTDLUIPAGE="https://finditandzip.ga/",t.HOMEPAGE=a="https://cococut.net",t.YTDLPAGE=i="https://pro.cococut.net/yt/";var p="Ext04";t.PRE_DEF_EXTS=p,d.browserAction.setIcon({path:{16:"assets/icons/16x16_gray.png",32:"assets/icons/32x32_gray.png",48:"assets/icons/48x48_gray.png",64:"assets/icons/64x64_gray.png",128:"assets/icons/128x128_gray.png"}});var h=d.i18n.getMessage;t.t=h;var v=["zh_tw","zh_cn"];function g(){var e=d.i18n.getUILanguage();return e.match(/zh-CN/)?"zh_cn":e.match(/zh-TW/)?"zh_tw":e.startsWith("zh")?"zh_cn":e.startsWith("en")?e.substr(0,2):"other"}if(t.supportedLanguages=v,d.runtime.onInstalled.addListener((function(e){var t=g(),r="https://cococut.net/"+(v.includes(t)?t+"/":"")+"installed.html";localStorage.getItem("installed")?chrome.storage.sync.set({installed:"t"}):d.tabs.create({url:r},(function(e){console.log("Hi, wellcome:)"),localStorage.setItem("installed","t"),chrome.storage.sync.set({installed:"t"})}))})),d.runtime.setUninstallURL){var m=g(),b="https://cococut.net/"+(v.includes(m)?m+"/":"")+"uninstalled.html";d.runtime.setUninstallURL(b)}function y(){return!(!localStorage.getItem("pui")||"active"!=(0,c.decipher)("CocoCut pro user")(localStorage.getItem("pui")).split("||")[3])}t.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP=/^https?:\/\/www\.youtube\.com\//;var x,E=function(){var e=localStorage.option,t={counter:0,domain:{}};try{e&&Object.assign(t,JSON.parse(e)),t.counter=Math.max(0,Math.floor(Number(t.counter)||0)),t.rcounterr=Math.max(0,Math.floor(Number(t.rcounterr)||0)),localStorage.option=JSON.stringify(t)}catch(e){console.log(e.stack)}return t},S=(x=(0,u.default)(s.default.mark((function e(){var t,r,n,o,a;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),r="://cococut.net/",n="other"!==t?"hls.html":"ohls.html",e.next=5,f();case 5:return(o=e.sent)&&(n=o),y()&&(r="://pro.cococut.net/",n="hls.vhtml","other"==t&&(n="ohls.vhtml")),a=r+(v.includes(t)?t+"/":"")+n,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),function(){return x.apply(this,arguments)});t.getLoaderUrl=S},284:(e,t,r)=>{"use strict";var n=r(203);Object.defineProperty(t,"__esModule",{value:!0}),t.onMessage=function(e,t){i.runtime.onMessage.addListener((function(r,n,o){var a=r.eventName,i=r.data;return a===e&&(t(i,o),!0)}))},t.sendMessage=u,t.setBgOptions=t.getBgOptions=t.tellBGbroadcastMsgFromPipe=t.setUserInfo=t.keepSetHeader=t.unsetHeader=t.setHeader=t.fetchTheDom=t.EVENTS=void 0;var o=n(r(824)),a=n(r(29)),i=navigator.userAgent.includes("Chrome")?chrome:browser,s={FETCH_DOM:"FETCH_DOM",SET_HEADER:"ADD_HEADER",UNSET_HEADER:"UNSET_HEADER",KEEP_SET_HEADER:"KEEP_SET_HEADER",BLOCK_ONE_DOMAIN:"BLOCK_ONE_DOMAIN",SET_SPEEDUP_REC:"SET_SPEEDUP_REC",SET_USER_INFO:"SET_USER_INFO",DLM_NEW_TASK:"DLM_NEW_TASK",ISAP:"IS_ACTIVE_MEMBER",MESSAGEPIPE:"MESSAGEPIPE",BROADCASTPIPEMESSAGE:"BROADCASTPIPEMESSAGE",GET_BG_OPTIONS:"GET_BG_OPTIONS",SET_BG_OPTIONS:"SET_BG_OPTIONS"};function u(e,t){return new Promise((function(r){i.runtime.sendMessage({eventName:e,data:t},(function(e){r(e)}))}))}t.EVENTS=s;var c,l=(c=(0,a.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(s.FETCH_DOM,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)});t.fetchTheDom=l;var f,d=(f=(0,a.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(s.SET_HEADER,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return f.apply(this,arguments)});t.setHeader=d;var p,h=(p=(0,a.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(s.UNSET_HEADER,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)});t.unsetHeader=h;var v,g=(v=(0,a.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(s.KEEP_SET_HEADER,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)});t.keepSetHeader=g;var m,b=(m=(0,a.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(s.SET_USER_INFO,t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)});t.setUserInfo=b;var y,x=(y=(0,a.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(s.MESSAGEPIPE,t);case 1:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)});t.tellBGbroadcastMsgFromPipe=x;var E,S=(E=(0,a.default)(o.default.mark((function e(){var t;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(s.GET_BG_OPTIONS);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),function(){return E.apply(this,arguments)});t.getBgOptions=S;var _,w=(_=(0,a.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(s.SET_BG_OPTIONS,t);case 1:case"end":return e.stop()}}),e)}))),function(e){return _.apply(this,arguments)});t.setBgOptions=w},692:(e,t,r)=>{"use strict";var n=r(203),o=r(501);Object.defineProperty(t,"__esModule",{value:!0}),t.setLocalStoreWithExpiry=function(e,t,r){var n={value:t,expiry:(new Date).getTime()+r};localStorage.setItem(e,JSON.stringify(n))},t.getLocalStoreWithExpiry=function(e){var t=localStorage.getItem(e);if(!t)return null;var r=JSON.parse(t);return(new Date).getTime()>r.expiry?(localStorage.removeItem(e),null):r.value},t.remainTimeMinutes=p,t.plusDlCount=t.decipher=t.cipher=t.fetch_retry=t.fetchWithTimeout=void 0;var a=n(r(824)),i=n(r(29)),s=n(r(231)),u=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=a?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(n,i,s):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(962));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=new AbortController,o=f({},t,{signal:n.signal});return setTimeout((function(){n.abort()}),r),fetch(e,o).then((function(e){if(!e.ok)throw new Error("".concat(e.status,": ").concat(e.statusText));return e})).catch((function(e){if("AbortError"===e.name)throw new Error("Response timed out");throw new Error(e.message)}))};function p(){return 1440-60*(new Date).getHours()-(new Date).getMinutes()}t.fetchWithTimeout=d,t.fetch_retry=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return d(t,r,n).catch((function(a){if(1===o)throw a;return e(t,r,n,o-1)}))},t.cipher=function(e){var t=function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))},r=function(e){return("0"+Number(e).toString(16)).substr(-2)},n=function(r){return t(e).reduce((function(e,t){return e^t}),r)};return function(e){return e.split("").map(t).map(n).map(r).join("")}},t.decipher=function(e){var t=function(t){return(r=e,r.split("").map((function(e){return e.charCodeAt(0)}))).reduce((function(e,t){return e^t}),t);var r};return function(e){return e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})).map(t).map((function(e){return String.fromCharCode(e)})).join("")}};var h,v=(h=(0,i.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getExpItem("dailyDlCount");case 2:t=(t=e.sent)?parseInt(t)+1:1,r=60*p()*1e3,u.setExpItem("dailyDlCount",t,r);case 6:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)});t.plusDlCount=v},106:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},358:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},102:(e,t,r)=>{var n=r(106);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},29:e=>{function t(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,a){var i=e.apply(r,n);function s(e){t(i,o,a,s,u,"next",e)}function u(e){t(i,o,a,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},983:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},81:(e,t,r)=>{var n=r(40);function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},231:(e,t,r)=>{var n=r(40);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},203:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},68:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},608:e=>{e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},894:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},282:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},337:(e,t,r)=>{var n=r(501).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new M(n||[]);return i(a,"_invoke",{value:w(e,r,s)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h={};function v(){}function g(){}function m(){}var b={};f(b,u,(function(){return this}));var y=Object.getPrototypeOf,x=y&&y(y(D([])));x&&x!==r&&a.call(x,u)&&(b=x);var E=m.prototype=v.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,s,u){var c=p(e[o],e,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,u)}),(function(e){r("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function w(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=T(i,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=p(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,h;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function D(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:L}}function L(){return{value:void 0,done:!0}}return g.prototype=m,i(E,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:g,configurable:!0}),g.displayName=f(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,f(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(_.prototype),f(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new _(d(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(E),f(E,l,"Generator"),f(E,u,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:D(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},131:(e,t,r)=>{var n=r(358),o=r(608),a=r(931),i=r(894);e.exports=function(e,t){return n(e)||o(e,t)||a(e,t)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},833:(e,t,r)=>{var n=r(102),o=r(68),a=r(931),i=r(282);e.exports=function(e){return n(e)||o(e)||a(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},27:(e,t,r)=>{var n=r(501).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},40:(e,t,r)=>{var n=r(501).default,o=r(27);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},501:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},931:(e,t,r)=>{var n=r(106);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},824:(e,t,r)=>{var n=r(337)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},962:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getExpItem:()=>l,getItem:()=>o,getLocalItem:()=>a,removeItem:()=>u,setExpItem:()=>c,setItem:()=>i,setLocalItem:()=>s});const n=navigator.userAgent.includes("Chrome")?chrome:browser,o=e=>new Promise(((t,r)=>n.storage.sync.get(e,(o=>n.runtime.lastError?r(Error(n.runtime.lastError.message)):t(o?o[e]:void 0))))),a=e=>new Promise(((t,r)=>n.storage.local.get(e,(o=>n.runtime.lastError?r(Error(n.runtime.lastError.message)):t(o?o[e]:void 0)))));function i(e,t){const r={};return r[e]=t,n.storage.sync.set(r)}function s(e,t){const r={};return r[e]=t,n.storage.local.set(r)}function u(e){return n.storage.sync.remove(e)}function c(e,t,r){i(e,{value:t,expiry:(new Date).getTime()+r})}async function l(e){const t=await o(e);return t?(new Date).getTime()>t.expiry?(u(e),null):t.value:null}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t,n,o,a,i,s,u=r(203),c=u(r(833)),l=u(r(824)),f=u(r(29)),d=u(r(131)),p=r(544),h=r(710),v=r(284),g=r(692),m=(e=(0,f.default)(l.default.mark((function e(t){var r,n,o,a,i,s,u,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,n=t.domLabel,o=t.reqInit,a=t.fetchTimeout,i=t.retryCount,e.next=3,(0,g.fetch_retry)(r,o,a,i).then((function(e){if(e.ok)return e.text();throw new Error(e.statusText)})).then((function(e){if(u=e,n){var t=(new DOMParser).parseFromString(e,"text/html");s=t.querySelector(n),c={}}})).catch((function(e){return console.log("failed fetch page: ",r,e),c={url:r,err:e.toString()},!1}));case 3:if(c){e.next=7;break}return e.abrupt("return",{dom:s,originHtml:u});case 7:return e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),b=(t=(0,f.default)(l.default.mark((function e(t){var r,n,o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:if(!(r=e.sent).hasOwnProperty("err")){e.next=5;break}return e.abrupt("return",r);case 5:if(n=r.dom,o=r.originHtml,!t.domLabel){e.next=11;break}if(!n){e.next=9;break}return e.abrupt("return",n.innerHTML);case 9:e.next=13;break;case 11:if(!o){e.next=13;break}return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),y=(n=(0,f.default)(l.default.mark((function e(t,r){var n,o,a,i,s,u,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.oneHeadDomain,o=t.oneHeadValue,U.push(n),a=0,i=Object.entries(o);a<i.length;a++)s=(0,d.default)(i[a],2),u=s[0],c=s[1],H[u]=c;U&&H&&O.webRequest.onHeadersReceived.addListener(j,{urls:["<all_urls>"]},["responseHeaders","blocking"]),t.keepTime&&(C=window.setTimeout(B,t.keepTime));case 5:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)}),x=(o=(0,f.default)(l.default.mark((function e(t,r){var n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:n=e.sent,r({type:"repDom",theFetchResp:n});case 5:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)}),E=(a=(0,f.default)(l.default.mark((function e(t){var r,n,o,a,i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.oneDomain,n=t.tabId,o=t.mediaId,a=t.oneEleIndex,delete w[o][a],A(n),(i=JSON.parse(localStorage.BlockedDomains)).push(r),i=(0,c.default)(new Set(i)),localStorage.BlockedDomains=JSON.stringify(i);case 7:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)}),S=(i=(0,f.default)(l.default.mark((function e(t){var r,n;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.tabId,t.checked?(n="if(!window.changeTime){videoTimeHook_(window)}else{console.log('videoTimeHook_ inited')};",O.tabs.executeScript(r,{code:n,allFrames:!0,runAt:"document_idle"},G("tabs.executeScript.on.setSpeedUpRecDiv")),n="changeTime(2, 0, true);",O.tabs.executeScript(r,{code:n,allFrames:!0,runAt:"document_idle"},G("tabs.executeScript.on.setSpeedUpRecDiv"))):O.tabs.executeScript(r,{code:"changeTime(0, 0, false, true);",allFrames:!0,runAt:"document_idle"},G("tabs.executeScript.on.setSpeedUpRecDiv"));case 2:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),_=(s=(0,f.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(localStorage.setItem("pui",t),chrome.storage.sync.set({pui:t})):(localStorage.removeItem("pui"),chrome.storage.sync.remove("pui"));case 1:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)});(0,p.doInit)();var w=w||new Array;window.mediaurls=w;var T=new Array,O=navigator.userAgent.includes("Chrome")?chrome:browser,I=navigator.userAgent.includes("Edg");(0,h.doHlsParsefunction)();var M=["$","^","[","]","(",")","{","}","|","+",".","\\"];function D(e,t){for(var r="^",n=0;n<e.length;n++){var o=e.charAt(n);if(L(o))r+="\\"+o;else switch(o){case"*":r+=".*";break;case"?":r+=".{0,1}";break;default:r+=o}}return r+="$",null!=t.match(r)}function L(e){for(var t in M)if(e==t)return!0;return!1}function A(e){console.log("updateBadgetAndIcon");var t=w["tabid"+e].reduce((function(e){return e+1}),0);t>0?(O.browserAction.setIcon({path:{16:"assets/icons/16x16.png",32:"assets/icons/32x32.png",48:"assets/icons/48x48.png",64:"assets/icons/64x64.png",128:"assets/icons/128x128.png"},tabId:e}),"true"==localStorage.showCountOnIcon&&O.browserAction.setBadgeText({text:t.toString(),tabId:e}),O.browserAction.setTitle({title:(0,p.t)("TbadgetTitle",[t]),tabId:e})):(O.browserAction.setIcon({path:{16:"assets/icons/16x16_gray.png",32:"assets/icons/32x32_gray.png",48:"assets/icons/48x48_gray.png",64:"assets/icons/64x64_gray.png",128:"assets/icons/128x128_gray.png"}}),O.browserAction.setBadgeText({text:"",tabId:e}),O.browserAction.setTitle({title:"CocoCut",tabId:e}))}function N(e){var t=e.split("?");return(t=(t=t[0].split("/"))[t.length-1].split("#"))[0].toLowerCase()}function P(e){var t=e.split(".");if(1==t.length)return null;var r=t[t.length-1];return(r=r.match(/[0-9a-zA-Z]*/))[0].toLowerCase()}function k(e,t){e=e.toLowerCase();for(var r=0;r<t.responseHeaders.length;r++)if(t.responseHeaders[r].name.toLowerCase()==e)return t.responseHeaders[r].value.toLowerCase();return null}function R(e,t,r){e=e.toLowerCase();for(var n=0;n<r.responseHeaders.length;n++)r.responseHeaders[n].name.toLowerCase()==e&&(r.responseHeaders[n].value=t)}O.webRequest.onResponseStarted.addListener((function(e){!function(e){if(-1!=e.tabId&&h.tabs[e.tabId]&&-1===h.tabs[e.tabId].url.indexOf("cococut.net"))if(p.DISABLE_DOWNLOADING_FROM_YOUTUBE_REGEXP.exec(h.tabs[e.tabId].url))h.tabs[e.tabId].url.indexOf("/watch")>-1&&((0,p.isActivePro)()||I)&&(O.browserAction.setIcon({path:{16:"assets/icons/16x16.png",32:"assets/icons/32x32.png",48:"assets/icons/48x48.png",64:"assets/icons/64x64.png",128:"assets/icons/128x128.png"},tabId:e.tabId}),O.browserAction.setBadgeText({text:"1",tabId:e.tabId}));else{var t="tabid"+e.tabId;if(!((w[r=t]?w[r].length:0)>=Number(localStorage.popListCount))){var r,n=k("content-length",e),o=N(e.url),a=P(o),i=k("content-type",e);"true"==localStorage.Debug&&console.log({name:o,url:e.url,size:n,ext:a,type:i,tabid:e.tabId,all:e});var s=new URL(e.url),u=JSON.parse(localStorage.BlockedDomains);for(f=0;f<u.length;f++){var c=u[f].toLowerCase();if(s.host==c)return}T=JSON.parse(localStorage[p.PRE_DEF_EXTS]);for(var l=!1,f=0;f<T.length;f++)if(-1!=T[f].ext.toLowerCase().indexOf(a)){if(0==T[f].size||n>=1024*T[f].size||null==n){l=!0,"ts"==a&&null==n&&(l=!1);break}return}if(null!=i&&!l){var d=JSON.parse(localStorage.Type);for(f=0;f<d.length;f++)if(D(d[f].Type.toLowerCase(),i)){if(0==d[f].size||n>=1024*d[f].size||null==n){l=!0;break}return}}var v=k("Content-Disposition",e);if(v){var g=v.match(/filename="(.*?)"/);if(g&&g[1])for(o=N(o=decodeURIComponent(g[1])),a=P(o),f=0;f<T.length;f++)if(-1!=T[f].ext.toLowerCase().indexOf(a)){l=!0;break}}if(l){var m=e.url,b=m,y="tabid"+e.tabId,x=new RegExp(localStorage.repeatReg,"g");"true"==localStorage.repeat&&(b=b.replace(x,"")),null==w[y]&&(w[y]=[]);for(var E=0;E<w[y].length;E++){var S=w[y][E].url;if("true"==localStorage.repeat&&(S=S.replace(x,"")),S==b)return}O.tabs.get(e.tabId,(function(t){if(O.runtime.lastError){var r=O.runtime.lastError.message;console.info(r)}var s;t&&(s=t.title),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*******";n=Math.round(100*n/1024/1024)/100+"MB";var r={name:o,url:m,size:n,ext:a,type:i,tabid:e.tabId,title:t,mediaid:y};w[y].push(r),O.runtime.sendMessage(r),A(e.tabId)}(s)}))}}}}(e)}),{urls:["http://*/*","https://*/*"]},["responseHeaders"]),O.tabs.onUpdated.addListener((function(e,t){if("loading"==t.status){var r="tabid"+e;w[r]&&(w[r]=[])}})),O.tabs.onRemoved.addListener((function(e){var t="tabid"+e;w[t]&&delete w[t]}));var C,U=[],H={};function j(e){var t=!0,r=!1,n=void 0;try{for(var o,a=U[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(-1!=e.url.indexOf(i)){for(var s=0,u=Object.entries(H);s<u.length;s++){var c=(0,d.default)(u[s],2),l=c[0],f=c[1];-1!==l.indexOf("SetItse2-")?R(l=l.split("SetItse2-")[1],f,e):e.responseHeaders.push({name:l,value:f})}return{responseHeaders:e.responseHeaders}}}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}function B(){O.webRequest.onHeadersReceived.removeListener(j)}var G=function(e){return function(){return!!O.runtime.lastError&&(console.log("["+e+"] WebExtensions.runtime.lastError => "+O.runtime.lastError.message),!0)}},q=function(){var e=localStorage.option,t={counter:0,domain:{}};try{e&&Object.assign(t,JSON.parse(e)),t.counter=Math.max(0,Math.floor(Number(t.counter)||0)),t.rcounterr=Math.max(0,Math.floor(Number(t.rcounterr)||0)),localStorage.option=JSON.stringify(t)}catch(e){console.log(e.stack)}return t},z=function(e){localStorage.option=JSON.stringify(e)};(0,v.onMessage)(v.EVENTS.SET_HEADER,(function(e,t){y(e,t)})),(0,v.onMessage)(v.EVENTS.FETCH_DOM,(function(e,t){x(e,t)})),(0,v.onMessage)(v.EVENTS.UNSET_HEADER,(function(e,t){B()})),(0,v.onMessage)(v.EVENTS.KEEP_SET_HEADER,(function(e,t){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;C&&(window.clearTimeout(C),C=window.setTimeout(B,e))}(e.keepTime)})),(0,v.onMessage)(v.EVENTS.BLOCK_ONE_DOMAIN,(function(e,t){E(e)})),(0,v.onMessage)(v.EVENTS.SET_SPEEDUP_REC,(function(e,t){S(e)})),(0,v.onMessage)(v.EVENTS.SET_USER_INFO,(function(e,t){_(e)})),(0,v.onMessage)(v.EVENTS.DLM_NEW_TASK,(function(e,t){var r;r=p.PROENV&&e.url.startsWith("https://")?"https":"http";var n=2;(0,p.isActivePro)()&&(n=4),startNewDl(e.url,r+(0,p.getDLMUrl)(),n)})),(0,v.onMessage)(v.EVENTS.ISAP,(function(e,t){t((0,p.isActivePro)())})),(0,v.onMessage)(v.EVENTS.MESSAGEPIPE,(function(e,t){var r={eventName:v.EVENTS.BROADCASTPIPEMESSAGE,data:e};O.tabs.query({},(function(e){for(var t=0;t<e.length;++t)O.tabs.sendMessage(e[t].id,r)}))})),(0,v.onMessage)(v.EVENTS.GET_BG_OPTIONS,(function(e,t){t(q())})),(0,v.onMessage)(v.EVENTS.SET_BG_OPTIONS,(function(e,t){z(e)})),fetch(p.HOMEPAGE+"/pub/config/config.json?v="+Date.now()).then((function(e){return e.json()})).then((function(e){if(e.serverNotice&&localStorage.setItem("serverNotice",e.serverNotice),e.recltime){var t=q();t.recltime=e.recltime,z(t)}if(e.waittime){var r=q();r.waittime=e.waittime,z(r)}if(e.dailycount){var n=q();n.dailycount=e.dailycount,z(n)}})).catch((function(e){console.log("error:",e)}))})()})();